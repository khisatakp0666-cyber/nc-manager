📄 起動手順まとめ（2025年9月時点）


──────────────────────────────
① Spring Boot（record-api）起動
──────────────────────────────

■ 実行場所：
N:\666 久田和恵\shared-server\record-api

■ 実行コマンド（PowerShell）：
cd "N:\666 久田和恵\shared-server\record-api"   ← record-api フォルダに移動  
.\gradlew.bat bootRun                             ← Spring Boot アプリを起動（Gradle）

http://127.0.0.1:8081/api/records/health

■ 成功ログ例：
Tomcat started on port(s): 8081 (http)
Started RecordApiApplication

■ Swagger UI アクセス：
http://localhost:8081/swagger-ui/index.html


──────────────────────────────
② Node.js（nc-manager）起動
──────────────────────────────

■ 実行場所：
N:\666 久田和恵\shared-server\nc-manager

■ 実行コマンド（PowerShell）：
node "N:\666 久田和恵\shared-server\nc-manager\server.js"   ← server.js を直接起動

cd "N:\666 久田和恵\shared-server-final\nc-manager"
node server.js

■ 成功ログ例：
📡 Server running at http://C20:3000

■ 画面アクセス：
http://localhost:3000/
または
http://192.168.70.113:3000/


──────────────────────────────
③ Swagger UI から nc-manager を起動（自動化）
──────────────────────────────

■ APIエンドポイント：
POST /api/nc/run

■ Java側の ProcessBuilder 設定例：
ProcessBuilder pb = new ProcessBuilder(
    "cmd.exe", "/c",
    "node", "\"N:\\666 久田和恵\\shared-server\\nc-manager\\server.js\""
);

■ 実行コマンド（PowerShell）：
cd .\electron-ui\
cd "N:\666 久田和恵\shared-server\nc-manager\electron-ui"
npm start

■ 実行結果：
server.js が自動起動 → 画面表示確認へ


──────────────────────────────
補足：起動順のおすすめ
──────────────────────────────

1. Spring Boot（record-api）を起動
2. Node.js（nc-manager）を起動
3. Swagger UI から自動起動テスト（任意）
──────────────────────────────

✅ コミットのやり方一覧

🔹 1. VSCodeでの操作手順

| ① ファイルを編集 | 任意のファイルを開いて変更する
| ② ステージング | ソース管理パネルで「＋」ボタンを押す（変更 → ステージ済みに移動）
| ③ メッセージ入力 | 「メッセージ」欄にコミット内容を記述
| ④ コミット | 「✔」ボタンを押す（または Ctrl + Enter）
| ⑤ Push | 右下の通知で「Pushしますか？」→「はい」 または Ctrl + Shift + P → 「Git: Push」

# ✅ Git リポジトリを初期化
git init

# ✅ すべてのファイルをステージに追加
git add .

# ✅ 初回コミット（メッセージは自由）
git commit -m "初期コミット"

🔹 2. Gitコマンドでの操作手順（PowerShellやターミナル）

| ① ステージング | git add . | すべての変更をステージに追加
| ② コミット | git commit -m "変更内容の説明" | ローカルに履歴を記録
| ③ Push | git push origin master | GitHubに反映（認証が必要な場合あり）

🔹 3. 一部だけステージ・コミットしたい場合

git add record-api/record-api_HELP.md
git commit -m "HELP.md追加"
git push origin master

→ 必要なファイルだけ選んで履歴に残すことも可能です


Remove-Item -Recurse -Force "$env:LOCALAPPDATA\electron-builder\Cache"
npx rimraf .\node_modules
npm install
npm run dist
Start-Process "dist\NCManagerUI Setup 1.0.0.exe"


① tree コマンドで全体構成を出力（PowerShell）
tree /F > folder-structure.txt

# 正しい順序で実行
tree /F /A > folder-structure.txt
Select-String -Path folder-structure.txt -Pattern "nc-manager"

✅ 補足：node.log の確認方法

cd .\electron-ui\
npm run dist
Test-Path "dist/win-unpacked/resources/node/node.exe"
Start-Process "dist\win-unpacked\NCManagerUI.exe"
Get-Content "$env:APPDATA\NCManagerUI\node.log" -Tail 50


java -jar "N:\666 久田和恵\shared-server-final\record-api\build\libs\record-api-0.0.1-SNAPSHOT.jar" --server.port=8081 --server.address=localhost

netstat -ano | findstr :8081

curl http://localhost:8081/

再ビルド

cd "N:\666 久田和恵\shared-server-final\record-api"
mvn clean package

## 起動と初期データ確認手順

1. `record-api` に移動して `.jar` を起動  
   `java -jar target/record-api-0.0.1-SNAPSHOT.jar`

2. 別ウィンドウでCSVを取得  
   `curl -OJ http://localhost:8082/api/records/export`

3. `records.csv` に以下のようなレコードが表示されれば成功：


## 注意点

- `records.csv` が既に存在している場合、`curl -OJ` は失敗します  
→ `Remove-Item .\records.csv` で削除してから再取得  
- ポート競合時は `netstat -ano | findstr :8082` → `Stop-Process -Id <PID> -Force`
- `data.sql` のテーブル名は JPA の `@Table(name = "record")` と一致させること
- `application.properties` に以下の設定が必要：

```properties
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data.sql


✅ 実行対象の .jar ファイル
- 生成場所：build/libs/record-api-0.0.1-SNAPSHOT.jar
- 実行対象：Spring Boot アプリケーション（RecordApiApplication が mainClass）

✅ 実行コマンド（Windows）
curl http://localhost:8085/api/records/health

✅ 応答が OK ならアプリケーションは正常に起動している

✅ CSV出力確認
curl http://localhost:8085/api/records/export -o records.csv

- ポート：`8085`
- 実行対象：`RecordApiApplication`
- 出力ファイル：`records.csv`

cd C:\Users\C20\Desktop\shared-server-final\electron-ui\resources\nc-manager
node server.js